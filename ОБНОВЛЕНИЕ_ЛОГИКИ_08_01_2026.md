# üîÑ –û–ë–ù–û–í–õ–ï–ù–ò–ï –°–ò–°–¢–ï–ú–´ - 08.01.2026

## ‚úÖ –ß–¢–û –ò–ó–ú–ï–ù–ò–õ–û–°–¨

### üéØ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–ü–†–û–ë–õ–ï–ú–ê:**
–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –£–°–¢–ê–†–ï–í–®–ò–ï —Å–∫—Ä–∏–ø—Ç—ã –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚ùå `scripts/data_collection/improved_collector.py` - —Å—Ç–∞—Ä—ã–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä
- ‚ùå `scripts/data_collection/daily_db_collector.py` - —Å—Ç–∞—Ä—ã–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä
- ‚ùå `update_from_sheets.py` - —É—Å—Ç–∞—Ä–µ–≤—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞–ª–∏ —Å **–°–¢–ê–†–û–ô** —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ë–î (`fiksa_records`), –∫–æ—Ç–æ—Ä–∞—è –±—ã–ª–∞ –∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ **–ù–û–í–£–Æ** (`fixations`, `operators`, `services`).

---

### ‚ö° –†–ï–®–ï–ù–ò–ï

–°–æ–∑–¥–∞–Ω **–ù–û–í–´–ô –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–±–æ—Ä—â–∏–∫ –¥–∞–Ω–Ω—ã—Ö**:
- ‚úÖ `scripts/data_collection/sheets_to_db_collector.py`

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–æ–≤–æ–≥–æ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞:

1. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–∞–±–ª–∏—Ü—É `fixations` (–≤–º–µ—Å—Ç–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π `fiksa_records`)
   - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏ —Å `operators` –∏ `services`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏ —Å–ª—É–∂–±

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–æ–Ω–∫–∏ E (—Å—Ç–∞—Ç—É—Å) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã (–∫–æ–ª–æ–Ω–∫–∞ A)
   - ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Å–ª—É–∂–µ–±–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤ (–°–≤–æ–¥–∫–∞, –¢—Ä–µ–Ω–¥—ã, –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
   - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–¥–∞ —Å–ª—É–∂–±—ã (102/103/104) –∏–∑ —Å—Ç–∞—Ç—É—Å–∞

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É –∫–∞—Ä—Ç—ã + –æ–ø–µ—Ä–∞—Ç–æ—Ä
   - UPDATE –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
   - INSERT –µ—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–æ–≤–∞—è

4. **–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π
   - –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π

---

## üìù –û–ë–ù–û–í–õ–ï–ù–ù–´–ï –§–ê–ô–õ–´

### 1. Telegram Bot (`scripts/telegram/interactive_bot.py`)
**–ë—ã–ª–æ:**
```python
[sys.executable, str(BASE_DIR / 'scripts' / 'data_collection' / 'improved_collector.py')]
```

**–°—Ç–∞–ª–æ:**
```python
[sys.executable, str(BASE_DIR / 'scripts' / 'data_collection' / 'sheets_to_db_collector.py')]
```

---

### 2. Telegram Bot (`scripts/telegram/working_bot.py`)
**–ë—ã–ª–æ:**
```python
collector_script = BASE_DIR / 'scripts' / 'data_collection' / 'improved_collector.py'
```

**–°—Ç–∞–ª–æ:**
```python
collector_script = BASE_DIR / 'scripts' / 'data_collection' / 'sheets_to_db_collector.py'
```

---

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (`–û–ë–ù–û–í–õ–ï–ù–ò–ï_–ö–ê–ñ–î–´–ô_–ß–ê–°.py`)
**–ë—ã–ª–æ:**
```python
[sys.executable, 'update_from_sheets.py']
```

**–°—Ç–∞–ª–æ:**
```python
[sys.executable, 'scripts/data_collection/sheets_to_db_collector.py']
```

---

## üóÑÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ë–î

### –°–¢–ê–†–ê–Ø (–±–æ–ª—å—à–µ –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø):
```sql
CREATE TABLE fiksa_records (
    id INTEGER PRIMARY KEY,
    collection_date DATE,
    operator_name TEXT,  -- –∏–º—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é
    card_number TEXT,
    status TEXT,
    ...
)
```

### –ù–û–í–ê–Ø (–∞–∫—Ç—É–∞–ª—å–Ω–∞—è):
```sql
-- –û–ø–µ—Ä–∞—Ç–æ—Ä—ã (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
CREATE TABLE operators (
    operator_id INTEGER PRIMARY KEY,
    operator_name TEXT UNIQUE,
    position TEXT,
    is_active BOOLEAN
)

-- –°–ª—É–∂–±—ã (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
CREATE TABLE services (
    service_id INTEGER PRIMARY KEY,
    service_code TEXT UNIQUE,  -- '102', '103', '104'
    service_name TEXT
)

-- –§–∏–∫—Å–∞—Ü–∏–∏ (–æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)
CREATE TABLE fixations (
    fixation_id INTEGER PRIMARY KEY,
    operator_id INTEGER,  -- —Å–≤—è–∑—å —Å operators
    service_id INTEGER,   -- —Å–≤—è–∑—å —Å services
    card_number TEXT,
    full_name TEXT,
    phone_called TEXT,
    address_declared TEXT,
    fixation_status TEXT,
    fixation_date TEXT,
    notes TEXT,
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    FOREIGN KEY (operator_id) REFERENCES operators(operator_id),
    FOREIGN KEY (service_id) REFERENCES services(service_id)
)
```

---

## üîç –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –í–°–ï –†–ê–ë–û–¢–ê–ï–¢

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î:
```powershell
python scripts\database\check_db.py
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–∞–±–ª–∏—Ü—ã:
- ‚úÖ `operators`
- ‚úÖ `services`
- ‚úÖ `fixations`
- ‚úÖ `applications`
- ‚úÖ `daily_statistics`

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:
```powershell
python scripts\data_collection\sheets_to_db_collector.py
```

–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
```
====================================================================================
üöÄ –ê–ö–¢–£–ê–õ–¨–ù–´–ô –°–ë–û–†–©–ò–ö –î–ê–ù–ù–´–• –ò–ó GOOGLE SHEETS –í –ë–î
====================================================================================
‚è∞ –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: 2026-01-08 10:30:00

[1/4] üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Google Sheets API...
      ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ

[2/4] üìã –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤...
      ‚úÖ –ù–∞–π–¥–µ–Ω–æ –ª–∏—Å—Ç–æ–≤: 35

[3/4] üì• –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤...
      [ 1/35] –û–ø–µ—Ä–∞—Ç–æ—Ä 1                                             ‚Üí 123 –∑–∞–ø–∏—Å–µ–π
      [ 2/35] –û–ø–µ—Ä–∞—Ç–æ—Ä 2                                             ‚Üí 456 –∑–∞–ø–∏—Å–µ–π
      ...
      
      üìä –ò–¢–û–ì–û —Å–æ–±—Ä–∞–Ω–æ: 15,234 –∑–∞–ø–∏—Å–µ–π

[4/4] üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...

====================================================================================
‚úÖ –û–ë–ù–û–í–õ–ï–ù–ò–ï –ó–ê–í–ï–†–®–ï–ù–û –£–°–ü–ï–®–ù–û
====================================================================================

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:
   –û–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 35
   –í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π —Å–æ–±—Ä–∞–Ω–æ: 15,234
   ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö: 1,234
   üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö: 14,000
   üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: C:\Users\...\data\fiksa_database.db
   ‚è∞ –ó–∞–≤–µ—Ä—à–µ–Ω–æ: 2026-01-08 10:35:00

====================================================================================
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Telegram –±–æ—Ç–µ:
1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
2. –ù–∞–∂–º–∏—Ç–µ **"üîÑ –û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ"**
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"

---

## üö® –í–û–ó–ú–û–ñ–ù–´–ï –û–®–ò–ë–ö–ò

### –û—à–∏–±–∫–∞: "–¢–∞–±–ª–∏—Ü–∞ 'fixations' –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
**–†–µ—à–µ–Ω–∏–µ:**
```powershell
python scripts\database\db_schema.py
```
–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î.

---

### –û—à–∏–±–∫–∞: "config/credentials.json –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–†–µ—à–µ–Ω–∏–µ:**
–°–º. –¥–æ–∫—É–º–µ–Ω—Ç `–ù–ê–°–¢–†–û–ô–ö–ê_GOOGLE_API.md` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Google Sheets API.

---

### –û—à–∏–±–∫–∞: "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è"
**–ü—Ä–∏—á–∏–Ω—ã:**
1. –í—Å–µ –∑–∞–ø–∏—Å–∏ –Ω–µ –ø—Ä–æ—à–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é (–Ω–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ –≤ –∫–æ–ª–æ–Ω–∫–µ E)
2. –í—Å–µ –ª–∏—Å—Ç—ã —Å–ª—É–∂–µ–±–Ω—ã–µ (–°–≤–æ–¥–∫–∞, –¢—Ä–µ–Ω–¥—ã –∏ —Ç.–¥.)

**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ Google Sheets:
- –ö–æ–ª–æ–Ω–∫–∞ E (—Å—Ç–∞—Ç—É—Å) –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
- –ö–æ–ª–æ–Ω–∫–∞ A (–Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã) –∑–∞–ø–æ–ª–Ω–µ–Ω–∞

---

## üìä –°–†–ê–í–ù–ï–ù–ò–ï –õ–û–ì–ò–ö–ò

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è | –ù–æ–≤–∞—è –≤–µ—Ä—Å–∏—è |
|----------|--------------|--------------|
| **–¢–∞–±–ª–∏—Ü–∞ –ë–î** | `fiksa_records` | `fixations` |
| **–û–ø–µ—Ä–∞—Ç–æ—Ä—ã** | –¢–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `operators` |
| **–°–ª—É–∂–±—ã** | –í —Å—Ç–∞—Ç—É—Å–µ | –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `services` |
| **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** | –ë–∞–∑–æ–≤–∞—è | –°—Ç—Ä–æ–≥–∞—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å—Ç–∞—Ç—É—Å + –Ω–æ–º–µ—Ä –∫–∞—Ä—Ç—ã) |
| **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è** | –û—á–∏—Å—Ç–∫–∞ + –≤—Å—Ç–∞–≤–∫–∞ | UPDATE —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö + INSERT –Ω–æ–≤—ã—Ö |
| **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** | –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è | –î–µ—Ç–∞–ª—å–Ω–∞—è —Å –ø–æ–¥—Å—á–µ—Ç–æ–º |
| **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** | –ù–µ –±—ã–ª–æ | –§–∏–ª—å—Ç—Ä —Å–ª—É–∂–µ–±–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤ |

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±–æ—Ç–∞
3. ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∫–∞–∂–¥—ã–π —á–∞—Å)
4. ‚ö†Ô∏è –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã:
   - `scripts/data_collection/improved_collector.py` ‚Üí `archive/`
   - `scripts/data_collection/daily_db_collector.py` ‚Üí `archive/`
   - `update_from_sheets.py` ‚Üí `archive/`

---

## üìö –°–í–Ø–ó–ê–ù–ù–´–ï –î–û–ö–£–ú–ï–ù–¢–´

- `–ù–ê–°–¢–†–û–ô–ö–ê_GOOGLE_API.md` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Sheets API
- `–ë–ê–ó–ê_–î–ê–ù–ù–´–•.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- `scripts/database/–°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨_–ë–î.md` - —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤

---

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 08.01.2026  
**–í–µ—Ä—Å–∏—è:** 2.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
