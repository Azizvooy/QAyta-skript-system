@echo off
chcp 65001 > nul
echo ========================================
echo üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï TELEGRAM –ë–û–¢–ê
echo ========================================
echo.

cd /d "%~dp0"

:: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
if not exist ".venv\Scripts\activate.bat" (
    echo ‚ùå –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!
    pause
    exit /b 1
)

echo ‚úÖ –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...
call .venv\Scripts\activate.bat

echo.
echo üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...
python -c "import telebot; print('‚úÖ telebot —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω')" 2>nul || (
    echo ‚ùå telebot –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!
    echo üí° –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: pip install pytelegrambotapi
    pause
    exit /b 1
)

echo.
echo üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞...
echo üìÖ %date% %time%
echo.

:: –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python send_to_telegram.py --test

echo.
echo ========================================
echo üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ê
echo ========================================

if %errorLevel% EQU 0 (
    echo ‚úÖ –ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
) else (
    echo ‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –æ—à–∏–±–∫–∏! –ö–æ–¥: %errorLevel%
)

echo.
pause
