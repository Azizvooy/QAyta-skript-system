@echo off
chcp 65001 >nul
cls

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
net session >nul 2>&1
if %errorLevel% neq 0 (
    echo ========================================
    echo –¢–†–ï–ë–£–Æ–¢–°–Ø –ü–†–ê–í–ê –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
    echo ========================================
    echo.
    echo –ó–∞–ø—É—Å–∫–∞—é —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞...
    powershell -Command "Start-Process '%~f0' -Verb RunAs"
    exit /b
)

echo.
echo ================================================================================
echo üîß –û–ë–ù–û–í–õ–ï–ù–ò–ï WSL (Windows Subsystem for Linux)
echo ================================================================================
echo.
echo WSL –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã Docker Desktop –Ω–∞ Windows.
echo –°–µ–π—á–∞—Å –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ WSL –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏...
echo.
timeout /t 3 /nobreak >nul

echo –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ: wsl --update
echo.
wsl --update

if %ERRORLEVEL% EQU 0 (
    echo.
    echo ================================================================================
    echo ‚úÖ WSL –£–°–ü–ï–®–ù–û –û–ë–ù–û–í–õ–ï–ù!
    echo ================================================================================
    echo.
    echo –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:
    echo   1. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    echo   2. –ò–õ–ò –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Docker Desktop
    echo   3. –ó–∞—Ç–µ–º –∑–∞–ø—É—Å—Ç–∏—Ç–µ: DOCKER_–ê–í–¢–û–ó–ê–ü–£–°–ö.bat
    echo.
) else (
    echo.
    echo ================================================================================
    echo ‚ö†Ô∏è –í–û–ó–ú–û–ñ–ù–û –¢–†–ï–ë–£–ï–¢–°–Ø –£–°–¢–ê–ù–û–í–ö–ê WSL
    echo ================================================================================
    echo.
    echo –ü–æ–ø—Ä–æ–±—É–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å WSL –∑–∞–Ω–æ–≤–æ...
    echo.
    wsl --install
    
    echo.
    echo –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ –∫–æ–º–ø—å—é—Ç–µ—Ä!
    echo.
)

echo.
echo –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ WSL:
wsl --version

echo.
echo ================================================================================
pause
